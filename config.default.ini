[DEFAULT]

; ========================================================
; dbus-aggregate-smartshunts Default Configuration
; ========================================================
; 
; DO NOT EDIT THIS FILE!
; 
; Copy settings you want to change to config.ini
; The config.ini file will override these defaults
; ========================================================
;
; QUICK START GUIDE - What to Configure
; ========================================================
; 
; MUST CONFIGURE (copy to config.ini):
;   (Nothing! By default acts as SmartShunt monitor, auto-detects capacity)
;
; RECOMMENDED TO REVIEW:
;   • DEVICE_NAME           - Custom name for how it appears in Venus OS
;   • TEMP_COLD_DANGER      - Adjust for your battery chemistry (LiFePO4: 5°C, Lead: 0°C)
;   • TEMP_HOT_DANGER       - Adjust for your battery chemistry (LiFePO4: 45°C, Lead: 40°C)
;   • EXCLUDE_SHUNTS        - Leave empty to include all SmartShunts, or exclude specific ones
;
; USUALLY FINE AT DEFAULTS:
;   • TEMP_COLD_DANGER / TEMP_HOT_DANGER - Temperature thresholds for smart reporting
;   • Update intervals (device discovery backoff is automatic)
;   • Error handling (SEARCH_TRIALS, READ_TRIALS, TIME_BEFORE_RESTART)
;   • Logging settings
;
; Note: Voltage alarms (low/high) are automatically passed through from SmartShunts.
;       Configure voltage alarm thresholds in VictronConnect for each SmartShunt.
;
; ⚠️ IMPORTANT: BMS FUNCTIONALITY REMOVED
; This project is now PURE MONITORING ONLY (no charge control).
; For BMS functionality (CVL/CCL/DCL, AllowToCharge/Discharge), use:
;   → dbus-smartshunt-to-bms project instead
;
; ========================================================

; ----- Device Configuration -----
; Custom name for the aggregate device (how it appears in Venus OS)
; Leave empty for default "SmartShunt Aggregate"
; Example: DEVICE_NAME = Battery Bank
; Example: DEVICE_NAME = House Batteries
DEVICE_NAME = 

; ----- SmartShunt Configuration -----
; Exclude specific SmartShunts from aggregation (leave empty to include ALL)
; By default, all SmartShunts found on D-Bus are included.
; Use this to exclude specific shunts (e.g. a DC load shunt you don't want included)
; Can be a list of device instance IDs or custom names
; Examples:
;   EXCLUDE_SHUNTS =                                    (empty = include all)
;   EXCLUDE_SHUNTS = 279                                (exclude by instance ID)
;   EXCLUDE_SHUNTS = "DC Loads", "Aux Battery"          (exclude by custom name)
;   EXCLUDE_SHUNTS = 279, "DC Loads"                    (mixed)
EXCLUDE_SHUNTS = 

; ----- Capacity Detection -----
; Total capacity is automatically detected by reading the configured capacity from each SmartShunt
; (stored in VE.Direct register 0x1000). This is the capacity you set in VictronConnect.
; The aggregate sums the capacity from all included SmartShunts.
; No configuration needed - it always uses the values from your SmartShunts.

; ----- Temperature Monitoring -----
; Smart temperature algorithm: Reports the most critical temperature across all batteries
;
; Below TEMP_COLD_DANGER:  Reports MINIMUM (coldest battery wins - prevents damage from cold charging)
; Above TEMP_HOT_DANGER:   Reports MAXIMUM (hottest battery wins - prevents thermal runaway)
; Between thresholds:      Reports AVERAGE (normal operating range)
;
; This prioritizes battery safety by highlighting dangerous conditions.
;
; Cold danger threshold (°C) - battery cannot safely charge below this
; LiFePO4: 5°C (or higher - LFP should not charge below freezing)
; Lead-acid: 0°C
TEMP_COLD_DANGER = 5.0

; Hot danger threshold (°C) - battery is getting dangerously hot
; LiFePO4: 45°C (max operating temp is typically 45-60°C)
; Lead-acid: 40°C
TEMP_HOT_DANGER = 45.0

; ----- Device Discovery -----
; How often to check for new/missing SmartShunts

; Initial check interval (seconds) - used for first 30 seconds
; After startup, checks every second to quickly discover devices
UPDATE_INTERVAL_FIND_DEVICES = 1

; Maximum check interval (seconds) - after devices are stable
; Uses exponential backoff: 1s → 2s → 4s → 8s → ... → 1800s (30 min)
; Reduces D-Bus traffic while still detecting new devices eventually
MAX_UPDATE_INTERVAL_FIND_DEVICES = 1800

; ----- Error Handling -----
; These control retry logic and service restart behavior

; Number of times to retry finding SmartShunts before giving up
SEARCH_TRIALS = 3

; Number of times to retry reading data from a SmartShunt before skipping it
READ_TRIALS = 3

; Seconds before restarting service after fatal error (0 = don't restart)
; The supervise daemon will restart the service automatically
TIME_BEFORE_RESTART = 0

; ----- Logging -----
; LOGGING levels: ERROR, WARNING, INFO, DEBUG
; ERROR   - only critical errors
; WARNING - errors and warnings
; INFO    - normal operation info (recommended)
; DEBUG   - detailed debugging (very verbose)
LOGGING = INFO

; How often to log a status summary (seconds)
; 0 = disable periodic logging (only log on changes/errors)
; 300 = log status every 5 minutes
; Periodic logs show current voltage, current, SoC for each shunt
LOG_PERIOD = 300

; ========================================================
; EXAMPLE USER CONFIG (config.ini)
; ========================================================
; Copy the settings below to config.ini and customize:
;
; [DEFAULT]
; ; Custom device name
; DEVICE_NAME = House Battery Bank
;
; ; Exclude a specific shunt (e.g., DC loads shunt)
; EXCLUDE_SHUNTS = 279
;
; ; Temperature thresholds for LiFePO4
; TEMP_COLD_DANGER = 5.0
; TEMP_HOT_DANGER = 45.0
;
; ; Enable debug logging
; LOGGING = DEBUG
; ========================================================
